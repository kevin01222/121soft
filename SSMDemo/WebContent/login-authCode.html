<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <meta content="telephone=no" name="format-detection">
    <meta content="email=no" name="format-detection">
    <meta name="hotcss" content="initial-dpr=1">
    <title>验证码登录</title>
    <link rel="stylesheet" type="text/css" href="css/reset.css">
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <script type="text/javascript" src="js/hotcss.js"></script>
</head>
<body>
<div class="wrapper">
    <div class="logo-wrap">
        <img class="icon-logo" src="img/icon-logo.png">
    </div>
    <img class="logo-wave" src="img/logo-wave.jpg">
    <ul class="login-form">
        <li class="input-phone"><input placeholder="请输入手机号" type="text" id="phone"><button class="send-auth J_GetCode" id='btnSendCode' onclick='sendMessage()' >发送验证码</button></li>
        <li class="input-noicon"><input placeholder="请输入验证码" type="text" id='checkCode'></li>
    </ul>
    <div class="login-button">
        <button onclick="login()">登录</button>
        <button onclick='loginpwd()'>密码登录</button>
        <p><a href="register.html">还没有账号？点击立刻注册></a></p>
    </div>
</div>
<script type="text/javascript" src="js/jquery-1.9.1.js"></script>
<script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript">
//发送短信
function sendMessage() {
	var phone = $("#phone").val(); //手机号码  
	if (phone != "") {
		var serialize="phone="+phone +"&type=2";
		//向后台发送处理数据  
       $.ajax({
	        url: '/SSMDemo/serverService/sendMessage',
	        dataType: 'json',
	        data: serialize,
	        success: function (d) {
	            if(d.code==200){
	            	alert(d.msg);
	            }else{
	                alert(d.msg);
	            }
	        }
    	});
	} else {
		alert("手机号码不能为空！");
	}
}
//验证码登录
function login(){
	var phone = $("#phone").val(); //手机号码  
	var pwd=$('#pwd').val();//密码
	var captcha=$('#checkCode').val();
	var serialize="phone=" + phone + "&captcha=" + captcha;
	 $.ajax({
	        url: '/SSMDemo/serverService/userLogin',
	        dataType: 'json',
	        data: serialize,
	        success: function (d) {
	            if(d.code==200){
	                //登录成功，跳转至首页
	                window.location.href='index.html';
	            }else{
	                //登录失败提示信息，重新填写登录信息
	                alert(d.msg);
	                return ;
	            }
	        }
	    });
}
function loginpwd(){
	 window.location.href="login.html"
}
</script>
</body>
</html>